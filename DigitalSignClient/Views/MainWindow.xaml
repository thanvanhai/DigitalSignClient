<mah:MetroWindow x:Class="DigitalSignClient.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:mah="http://metro.mahapps.com/winfx/xaml/controls"
        xmlns:iconPacks="http://metro.mahapps.com/winfx/xaml/iconpacks"
        Title="Digital Sign Client" 
        Height="700" 
        Width="1200"
        WindowStartupLocation="CenterScreen"
        GlowBrush="{DynamicResource MahApps.Brushes.Accent}"
        BorderThickness="1"
        WindowTransitionsEnabled="True">

    <!-- KEEP ORIGINAL TITLEBAR (LEFT / RIGHT WINDOW COMMANDS) -->
    <mah:MetroWindow.LeftWindowCommands>
        <mah:WindowCommands>
            <StackPanel Orientation="Horizontal">
                <iconPacks:PackIconMaterial Kind="FileDocumentEdit" 
                                            Width="20" 
                                            Height="20" 
                                            VerticalAlignment="Center" 
                                            Margin="0,0,8,0"/>
                <TextBlock Text="Digital Sign Client" 
                           FontSize="16" 
                           FontWeight="Bold" 
                           VerticalAlignment="Center"/>
            </StackPanel>
        </mah:WindowCommands>
    </mah:MetroWindow.LeftWindowCommands>

    <mah:MetroWindow.RightWindowCommands>
        <mah:WindowCommands>
            <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                <iconPacks:PackIconMaterial Kind="Account" 
                                            Width="18" 
                                            Height="18" 
                                            VerticalAlignment="Center" 
                                            Margin="0,0,8,0"/>
                <TextBlock Text="{Binding CurrentUser.FullName}" 
                           FontSize="14" 
                           VerticalAlignment="Center" 
                           Margin="0,0,15,0"/>
                <Button Content="Đăng xuất" 
                        Command="{Binding LogoutCommand}"/>
            </StackPanel>
        </mah:WindowCommands>
    </mah:MetroWindow.RightWindowCommands>

    <Grid>
        <mah:HamburgerMenu x:Name="HamburgerMenuControl"
                   DisplayMode="CompactInline"
                   IsPaneOpen="True"
                   CompactPaneLength="48"
                   OpenPaneLength="230"
                   PaneBackground="{DynamicResource MahApps.Brushes.Accent}"
                   PaneForeground="White"
                   Foreground="{DynamicResource MahApps.Brushes.ThemeForeground}"
                   ItemClick="HamburgerMenuControl_ItemClick">

            <!-- ✅ Template hiển thị từng item -->
            <mah:HamburgerMenu.ItemTemplate>
                <DataTemplate DataType="{x:Type mah:HamburgerMenuIconItem}">
                    <StackPanel Orientation="Horizontal" Margin="10,5">
                        <ContentPresenter Content="{Binding Icon}" Width="24" Height="24" />
                        <TextBlock Text="{Binding Label}"
                           Margin="10,0,0,0"
                           VerticalAlignment="Center"
                           FontSize="14"
                           Foreground="White"/>
                    </StackPanel>
                </DataTemplate>
            </mah:HamburgerMenu.ItemTemplate>

            <!-- ✅ Template hiển thị item đang được chọn -->
            <mah:HamburgerMenu.OptionsItemTemplate>
                <DataTemplate DataType="{x:Type mah:HamburgerMenuIconItem}">
                    <StackPanel Orientation="Horizontal" Margin="10,5">
                        <ContentPresenter Content="{Binding Icon}" Width="24" Height="24" />
                        <TextBlock Text="{Binding Label}"
                           Margin="10,0,0,0"
                           VerticalAlignment="Center"
                           FontSize="14"
                           Foreground="White"
                           FontWeight="Bold"/>
                    </StackPanel>
                </DataTemplate>
            </mah:HamburgerMenu.OptionsItemTemplate>

            <!-- ✅ Danh sách item -->
            <mah:HamburgerMenu.ItemsSource>
                <mah:HamburgerMenuItemCollection>
                    <mah:HamburgerMenuIconItem Label="Dashboard" Tag="Dashboard">
                        <mah:HamburgerMenuIconItem.Icon>
                            <iconPacks:PackIconMaterial Kind="ViewDashboard" Width="22" Height="22"/>
                        </mah:HamburgerMenuIconItem.Icon>
                    </mah:HamburgerMenuIconItem>

                    <mah:HamburgerMenuIconItem Label="Loại tài liệu" Tag="DocumentType">
                        <mah:HamburgerMenuIconItem.Icon>
                            <iconPacks:PackIconMaterial Kind="FileDocument" Width="22" Height="22"/>
                        </mah:HamburgerMenuIconItem.Icon>
                    </mah:HamburgerMenuIconItem>

                    <mah:HamburgerMenuIconItem Label="Workflow" Tag="Workflow">
                        <mah:HamburgerMenuIconItem.Icon>
                            <iconPacks:PackIconMaterial Kind="Sitemap" Width="22" Height="22"/>
                        </mah:HamburgerMenuIconItem.Icon>
                    </mah:HamburgerMenuIconItem>

                    <mah:HamburgerMenuIconItem Label="Văn bản" Tag="DocumentList">
                        <mah:HamburgerMenuIconItem.Icon>
                            <iconPacks:PackIconMaterial Kind="FileMultiple" Width="22" Height="22"/>
                        </mah:HamburgerMenuIconItem.Icon>
                    </mah:HamburgerMenuIconItem>
                </mah:HamburgerMenuItemCollection>
            </mah:HamburgerMenu.ItemsSource>

            <!-- ✅ Phần nội dung chính -->
            <mah:HamburgerMenu.Content>
                <Border Background="{DynamicResource MahApps.Brushes.ThemeBackground}"
                Padding="12"
                Margin="0,8,0,8">
                    <ContentControl Content="{Binding CurrentView}" />
                </Border>
            </mah:HamburgerMenu.Content>
        </mah:HamburgerMenu>
    </Grid>
</mah:MetroWindow>
